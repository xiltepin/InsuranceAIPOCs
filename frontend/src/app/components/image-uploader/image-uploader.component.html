<div class="image-uploader">
  <header class="header">
    <h1 class="logo">OCR App</h1>
    <p class="subtitle">Extract text from images with OCR</p>
  </header>

  <main class="main-content">
    <div class="upload-section">
      <div class="file-input-wrapper">
        <input
          type="file"
          id="fileInput"
          (change)="onFileSelected($event)"
          accept="image/*"
          class="file-input"
          [disabled]="isProcessing"
        />
        <label for="fileInput" class="file-label">Choose Image</label>
      </div>

      <button
        (click)="uploadImage()"
        [disabled]="!selectedFile || isProcessing"
        class="action-btn"
      >
        <span *ngIf="isProcessing" class="spinner"></span>
        {{ isProcessing ? 'Processing...' : 'Process OCR' }}
      </button>

      <button
        *ngIf="selectedFile || ocrResult || error"
        (click)="resetForm()"
        class="action-btn secondary"
        [disabled]="isProcessing"
      >
        Reset
      </button>
    </div>

    <div *ngIf="isProcessing" class="loading-overlay">
      <div class="spinner"></div>
      <p>Processing your image...</p>
    </div>

    <div *ngIf="error" class="error-message">
      <span class="error-icon">!</span>
      <span>{{ error }}</span>
    </div>

    <div *ngIf="ocrResult" class="result-section">
      <h2>Extracted Text Blocks</h2>
      <div *ngIf="ocrResult.text_blocks && ocrResult.text_blocks.length > 0; else noBlocks">
        <table class="ocr-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Text</th>
              <th>Confidence</th>
              <th>Bounding Box</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let block of ocrResult.text_blocks; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ block.text }}</td>
              <td>{{ block.confidence | number: '1.0-2' }}%</td>
              <td>{{ block.bbox }}</td>
            </tr>
          </tbody>
        </table>
        <p class="summary">Average Confidence: {{ getConfidenceScore() }}%</p>
        <p class="summary">Full Text: <span class="full-text">{{ ocrResult.full_text }}</span></p>
      </div>
      <ng-template #noBlocks>
        <p>No text blocks detected.</p>
      </ng-template>
    </div>
  </main>
</div>